   VERSION=( "1.1.4" "1.1.3" )
  CATEGORY="network kernel"
 ATTRIBUTE="driver linux-26-module"
    SOURCE="ipw2100/ipw2100-$VERSION.tgz"
       URL="$SOURCEFORGE_URL"
  HOMEPAGE="http://ipw2100.sourceforge.net"
       REQ="hotplug ieee80211"
  ESTIMATE="26"
      DESC="ipw2100 provides support for the Intel Pro/Wireless 2100 card
ipw2100 provides support for the Intel Pro/Wireless 2100 miniPCI 
adapters. The driver needs binary firmware images for any practical
use. The binary firmware images are covered by an Intel license (see the
the LICENSE file in the firmware package).
"


FW_DIR=/lib/firmware
FW_FILE=ipw2100-fw-1.3.tgz
KVER=$( installed_version $( get_provider linux-kernel ) )
PINC=/lib/modules/${KVER}/include

install_firmware() { 
  [ -d $FW_DIR ] || mkdir $FW_DIR
  cd $FW_DIR
  echo "Installing firmware to $FW_DIR."
  tar xzf $SCRIPT_DIR/$FW_FILE ipw*.fw
  chown	root.root	ipw*.fw
  chmod	644		ipw*.fw
  cd -
}

build() {
 sed  -i "s:^KVER:#KVER:"  Makefile                             &&
 sed  -i "s:/sbin/depmod -a:/sbin/depmod -a $KVER:"  Makefile   &&
 make  KVER=$KVER  IEEE80211_INC=$PINC        		&&
 prepare_install					&&
 make  install  KVER=$KVER  IEEE80211_INC=$PINC		&&
 install_firmware
}
